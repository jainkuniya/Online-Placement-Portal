<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>LNMIIT PLACEMENT PORTAL</title>
      <link href="../static/css/bootstrap.min.css" rel="stylesheet">
      <link href="../static/materialIcon.css" rel="stylesheet">
      <!-- Toastr style -->
      <link href="../static/css/plugins/toastr/toastr.min.css" rel="stylesheet">
      <!-- Gritter -->
      <link href="../static/js/plugins/gritter/jquery.gritter.css" rel="stylesheet">
      <link href="../static/css/animate.css" rel="stylesheet">
      <link href="../static/css/style.css" rel="stylesheet">
   </head>
   <body>
      <div id="wrapper">
         <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
               <ul class="nav metismenu" id="side-menu">
               <li class="nav-header">
                  <div class="dropdown profile-element">
                     <span>
                     <img alt="image" class="img-circle" src="../static/img/profile_small.jpg" />
                     </span>
                     <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
                        <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">Desiree Rockhall (Admin)</strong>
                  </div>
                  <div class="logo-element">
                  IN+
                  </div>
               </li>
               <li class="active">
               <a href="#"><i class="material-icons">people</i> <span class="nav-label">Students' Verification</span></a>
               </li>
            </div>
         </nav>
         <div id="page-wrapper" class="gray-bg dashbard-1">
            <div class="row border-bottom">
               <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                  <div class="navbar-header">
                     <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="index.html#"><i class="material-icons">menu</i> </a>
                    </div>
                  <ul class="nav navbar-top-links navbar-right">
                     <li>
                        <span class="m-r-sm text-muted welcome-message">Welcome to LNMIIT Placement Portal</span>
                     </li>
                     <li class="dropdown">
                     </li>
                     <li class="dropdown">
                        <a class="dropdown-toggle count-info" data-toggle="dropdown" href="index.html#">
                        <i class="material-icons">add_alert</i>  <span class="label label-primary">8</span>
                        </a>
                        <ul class="dropdown-menu dropdown-alerts">
                           <li>
                              <a href="#">
                                 <div>
                                   <i class="material-icons">email</i> You have 16 messages
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                 </div>
                              </a>
                           </li>
                           <li class="divider"></li>
                           <li>
                              <a href="#">
                                 <div>
                                    <i class="material-icons">cloud_upload</i> Server Rebooted
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                 </div>
                              </a>
                           </li>

                        </ul>
                     </li>
                     <li>
                        <a href="./logout">
                        <i class="material-icons">input</i> Log out
                        </a>
                     </li>
                  </ul>
               </nav>
            </div>
            <div style =" height:1000px;" class="row  border-bottom white-bg dashboard-header">
               <div class="col-md-3">
                  <h2>Welcome Admin</h2>
                  <small id ="msg" style="color:red;">You have to approve the details of the listed students</small>
                  <div class="container" id="form1">
                     <hr>
                     No Backlog
                     {% for student in pending_students.noBacklog %}

                     <div class="col-xs-12" id="1">
                        <div class="col-xs-3"><a>{{ student.rollNo }}</a></div>
                        <div class="col-xs-3"><a>{{ student.name }}</a></div>
                        <div class="col-xs-3"><a>
                          {% for backlog in student.backlog %}


                                Sem:- {{ student.backlog[backlog].sem }} Course:- {{ student.backlog[backlog].course }} <br>

                         {% endfor %}
                        </a></div>
                        <div class="col-xs-3"><a><button id = "1" class="btn btn-primary" onclick="verifyStudent('{{ student.rollNo }}');">Approve</button></a></div>
                        <hr>
                     </div>

                    {% endfor %}
                     <hr>
                     <button id="approve" class="btn btn-success" onclick="selectAll(0)">Approve all</button>
                    </div>
                    <div class="container" id="form1">
                       <hr>
                       Backlog
                       {% for student in pending_students.backlog %}

                       <div class="col-xs-12" id="1">
                          <div class="col-xs-3"><a>{{ student.rollNo }}</a></div>
                          <div class="col-xs-3"><a>{{ student.name }}</a></div>
                          <div class="col-xs-3"><a>
                            {% for backlog in student.backlog %}


                                  Sem:- {{ student.backlog[backlog].sem }} Course:- {{ student.backlog[backlog].course }} <br>

                           {% endfor %}
                          </a></div>
                          <div class="col-xs-3"><a><button id = "1" class="btn btn-primary" onclick="verifyStudent('{{ student.rollNo }}');">Approve</button></a></div>
                          <hr>
                       </div>

                      {% endfor %}
                       <hr>
                       <button id="approve" class="btn btn-success" onclick="selectAll(1)">Approve all</button>
                      </div>
               </div>
            </div>
            <div style="position:fixed;bottom:0;">
               <strong>Copyright</strong> B12 &copy; 2014-2017
            </div>
         </div>
      </div>
      </div>
      </div>
      </div>
      </div>
      </div>
      <!-- Mainly scripts -->
      <script src="../static/js/jquery-3.1.1.min.js"></script>
      <script src="../static/js/bootstrap.min.js"></script>
      <script src="../static/js/plugins/metisMenu/jquery.metisMenu.js"></script>
      <script src="../static/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
      <!-- Flot -->
      <script src="../static/js/plugins/flot/jquery.flot.js"></script>
      <script src="../static/js/plugins/flot/jquery.flot.tooltip.min.js"></script>
      <script src="../static/js/plugins/flot/jquery.flot.spline.js"></script>
      <script src="../static/js/plugins/flot/jquery.flot.resize.js"></script>
      <script src="../static/js/plugins/flot/jquery.flot.pie.js"></script>
      <!-- Peity -->
      <script src="../static/js/plugins/peity/jquery.peity.min.js"></script>
      <script src="../static/js/demo/peity-demo.js"></script>
      <!-- Custom and plugin javascript -->
      <script src="../static/js/inspinia.js"></script>
      <script src="../static/js/plugins/pace/pace.min.js"></script>
      <!-- jQuery UI -->
      <script src="../static/js/plugins/jquery-ui/jquery-ui.min.js"></script>
      <!-- GITTER -->
      <script src="../static/js/plugins/gritter/jquery.gritter.min.js"></script>
      <!-- Sparkline -->
      <script src="../static/js/plugins/sparkline/jquery.sparkline.min.js"></script>
      <!-- Sparkline demo data  -->
      <script src="../static/js/demo/sparkline-demo.js"></script>
      <!-- ChartJS-->
      <script src="../static/js/plugins/chartJs/Chart.min.js"></script>
      <!-- Toastr -->
      <script src="../static/js/plugins/toastr/toastr.min.js"></script>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
      <script type="text/javascript">
      function verifyStudent(rollNo) {
  $('#id_error').text();
  $.ajax({
    type: 'POST',
    url: '/api/v1/tpo/verify_student',
    contentType: 'application/json',
    data: JSON.stringify({
      rollNo: rollNo,
    }),
    success: function(result) {
      if (result.success === 1) {
        $('#id_error').text(result.message);
        $(location).attr('href', './tpo');
      } else if (result.success === -99) {
        $(location).attr('href', './logout');
      } else {
        $('#id_error').text(result.message);
      }
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
      $('#id_error').text('Error: ' + errorThrown);
    },
  });
  return false;
}
function selectAll(whichGroup) {
  $('#id_error').text();
  $.ajax({
    type: 'POST',
    url: '/api/v1/tpo/verify_all_student',
    contentType: 'application/json',
    data: JSON.stringify({
      whichGroup: whichGroup,
    }),
    success: function(result) {
      if (result.success === 1) {
        $('#id_error').text(result.message);
        $(location).attr('href', './tpo');
      } else if (result.success === -99) {
        $(location).attr('href', './logout');
      } else {
        $('#id_error').text(result.message);
      }
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
      $('#id_error').text('Error: ' + errorThrown);
    },
  });
  return false;
}
</script>
   </body>
</html>
